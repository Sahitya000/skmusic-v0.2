<!DOCTYPE html>
<html>
<head>
  <title>P Saavn Song</title>
</head>
<body style="background:#121212; color:white; text-align:center; padding:2rem; font-family:sans-serif;">
  <h2>ttt</h2>Saavn Song Player</h2>
  <input type="text" id="search" placeholder="Enter song name" style="padding:10px; width:60%;">
  <button onclick="playSong()" style="padding:10px 20px;">Search & Play</button>
  <br><br>
  <audio id="player" controls style="width:80%;"></audio>

  <script>
    async function playSong() {
      const query = document.getElementById("search").value.trim().replace(/\s+/g, '+');
      if (!query) return alert("Please enter a song name!");

      const apiUrl = `https://corsproxy.io/?https://www.jiosaavn.com/api.php?__call=search.getResults&q=${query}&_format=json&_marker=0&ctx=web6dot0`;
      
      try {
        const res = await fetch(apiUrl);
        const json = await res.json();

        const firstSong = json.results?.[0];
        if (!firstSong || !firstSong.media_preview_url) {
          return alert("No song found!");
        }

        const fullUrl = firstSong.media_preview_url.replace('preview', '') + '.mp4';
        document.getElementById("player").src = fullUrl;
        document.getElementById("player").play();
      } catch (e) {
        console.error(e);
        alert("Error fetching song!");
      }
    }
  </script>
</body>
</html>
